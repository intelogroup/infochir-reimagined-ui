
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Infochir-RHCA | Votre Espace Scientifique En Ligne</title>
    <meta name="description" content="Votre Espace Scientifique En Ligne - Ressources médicales et scientifiques pour les professionnels de la santé en Haïti et dans la Caraïbe." />
    <meta name="author" content="Infochir-RHCA" />
    <meta property="og:title" content="Infochir-RHCA | Votre Espace Scientifique En Ligne" />
    <meta property="og:description" content="Votre Espace Scientifique En Ligne - Ressources médicales et scientifiques pour les professionnels de la santé en Haïti et dans la Caraïbe." />
    <meta property="og:image" content="/og-image.png" />
    <meta property="og:url" content="https://info-chir.org" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Infochir-RHCA | Votre Espace Scientifique En Ligne" />
    <meta name="twitter:description" content="Votre Espace Scientifique En Ligne - Ressources médicales et scientifiques pour les professionnels de la santé en Haïti et dans la Caraïbe." />
    <meta name="twitter:image" content="/og-image.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="keywords" content="Infochir, RHCA, médecine, chirurgie, anesthésiologie, Haïti, science médicale, formation médicale, recherche" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://info-chir.org" />
    
    <!-- Resource hints for fast loading -->
    <link rel="preconnect" href="https://llxzstqejdrplmxdjxlu.supabase.co" crossorigin />
    <link rel="dns-prefetch" href="https://llxzstqejdrplmxdjxlu.supabase.co" />
    
    <!-- Preload critical assets -->
    <link rel="preload" href="/lovable-uploads/75589792-dc14-4d53-9aae-5796c76a3b39.png" as="image" fetchpriority="high" />
    <link rel="preload" href="/src/index.css" as="style" />
    <link rel="preload" href="/favicon.ico" as="image" />
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    <!-- Cache control meta tags -->
    <meta http-equiv="Cache-Control" content="max-age=3600, must-revalidate" />
    
    <!-- Add JS detection immediately -->
    <script>
      (function() {
        document.documentElement.classList.remove('no-js');
        document.documentElement.classList.add('js');
        
        // Add performance marks for measuring load times
        if (window.performance && window.performance.mark) {
          window.performance.mark('app-init-start');
        }
        
        // Prefetch critical routes
        const routes = ['/', '/about', '/rhca', '/igm', '/submission'];
        routes.forEach(route => {
          const link = document.createElement('link');
          link.rel = 'prefetch';
          link.href = route;
          link.as = 'document';
          document.head.appendChild(link);
        });
      })();
    </script>
    
    <!-- Inline critical CSS for fastest rendering -->
    <style>
      /* Critical CSS for initial render */
      body { margin: 0; font-family: system-ui, sans-serif; }
      .no-js-warning { display: none; }
      .no-js .no-js-warning { display: block; padding: 20px; text-align: center; background: #f8fafc; color: #1f2937; font-family: system, -apple-system, sans-serif; }
      .js-content { display: block; }
      .no-js .js-content { display: none; }
      #initial-loader { display: flex; position: fixed; inset: 0; justify-content: center; align-items: center; background: linear-gradient(to bottom, #f8fafc, #ffffff); z-index: 9999; }
      .loader-spinner { border: 4px solid #f3f3f3; border-top: 4px solid #1E40AF; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin-bottom: 20px; }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
      .loader-text { font-family: sans-serif; color: #666; }
    </style>
    
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        // Register service worker immediately
        navigator.serviceWorker.register('/sw.js', {scope: '/'})
          .catch(function(error) {
            console.error('ServiceWorker registration failed:', error);
          });
      }
    </script>
  </head>

  <body>
    <!-- Initial visible loader -->
    <div id="initial-loader">
      <div style="text-align: center">
        <div class="loader-spinner"></div>
        <p class="loader-text">Chargement de l'application...</p>
      </div>
    </div>
    
    <!-- No JavaScript fallback -->
    <div class="no-js-warning">
      <h1>JavaScript Required</h1>
      <p>We're sorry, but this application requires JavaScript to function properly. Please enable JavaScript in your browser settings and reload the page.</p>
      <p>If you cannot enable JavaScript, you can:</p>
      <ul style="list-style: none; padding: 0;">
        <li>Contact us at support@infochir.com</li>
        <li>Visit our static content at static.infochir.com</li>
        <li>Call us at +1234567890</li>
      </ul>
    </div>
    
    <!-- Main app content -->
    <div id="root" class="js-content"></div>
    <!-- GPT Engineer script must be before the main application script -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Remove initial loader when app is done -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Mark DOMContentLoaded
        if (window.performance && window.performance.mark) {
          window.performance.mark('dom-content-loaded');
        }
        
        // Listen for app-loaded event
        window.addEventListener('app-loaded', function() {
          const loader = document.getElementById('initial-loader');
          if (loader) {
            loader.style.opacity = '0';
            loader.style.transition = 'opacity 0.3s ease';
            setTimeout(() => {
              loader.style.display = 'none';
            }, 300);
          }
          
          // Mark app-loaded performance
          if (window.performance && window.performance.mark) {
            window.performance.mark('app-loaded');
            window.performance.measure('app-total-load', 'app-init-start', 'app-loaded');
          }
        });
        
        // Fallback if event never fires
        setTimeout(function() {
          const loader = document.getElementById('initial-loader');
          if (loader && loader.style.display !== 'none') {
            loader.style.display = 'none';
          }
        }, 5000);
      });
    </script>
  </body>
</html>
